# 課題・非効率ポイント整理

## 概要

現行業務フローから抽出した課題と非効率ポイントを整理し、優先順位付けと改善方針を明確化します。

---

## 1. 認証・アカウント管理に関する課題

### 課題
- 現在のアプリは自分のメールアドレスからしか送信できず、複数ユーザーに対応できない
- 認証機能が不十分で、各アカウントのメールアドレスに紐づけられない

### 影響度
- **高**: チーム導入の前提条件。現状では個人利用のみ可能

### 優先度
- **Must**: 最優先で実装が必要

### 改善方針
- しっかりとした認証機能の実装（Azure AD 連携）
- 各アカウントのメールアドレス登録・管理機能
- 4つのロール（システム管理者/マネージャー/社員/パートナー）による権限管理

---

## 2. 勤務地・設定管理に関する課題

### 課題
- 勤務地が自動で「飯田橋」になり、客先常駐や自宅勤務の選択肢がない（日報・勤務表共通）
- 顧客名・プロジェクト名が切り替わるたびに出力内容を手動で変更する必要がある

### 影響度
- **中**: 業務効率に直接影響。手動作業が発生

### 優先度
- **Must**: MVP に含める

### 改善方針
- 勤務地選択機能（飯田橋/客先常駐/自宅等）を日報・勤務表に実装
- 顧客名・プロジェクト名の設定変更ページを作成し、切り替え時の手間を削減

---

## 3. 休日管理に関する課題

### 課題
- 休日登録がシステム化されておらず、勤務表への反映のために手動調整が発生
- マネージャーが休暇状況を把握しづらい
- 予定管理が Outlook と連携されておらず、確認に手間がかかる

### 影響度
- **高**: マネージャーからの要望。チーム導入時に必須

### 優先度
- **Must**: Phase 4（拡張機能）で実装

### 改善方針
- アプリから休日を登録し、勤務表へ自動反映できるようにする
- 登録された休日を Outlook の共有カレンダーに自動登録し、チームで確認できるようにする
- 休暇状況ダッシュボードの整備
- EventBridge + Lambda による自動出力処理

---

## 4. 勤務表の自動化に関する課題

### 課題
- Excel ファイルの SharePoint へのアップロードが自動化されていない
- 入力が完了していない場合の通知機能がない
- 休日の手動調整が必要で面倒

### 影響度
- **中〜高**: 月次作業の効率化に直結

### 優先度
- **Must**: 自動出力と通知は必須、SharePoint 自動アップロードも重要

### 改善方針
- 休日登録が完了している場合は自動で勤務表を出力する機能（EventBridge + Lambda）
- 入力が完了していない場合は、各メンバーに通知を送って手動入力を促す機能
- SharePoint への自動アップロード機能
- 月次トリガーによる自動出力と未完了メンバーへの通知

---

## 5. 通知・可視化に関する課題

### 課題
- 日報未提出時の通知がなく、本人もマネージャーも気付きづらい
- チーム導入時にマネージャーが提出状況を把握しづらい

### 影響度
- **中**: 運用効率とガバナンスに影響

### 優先度
- **Must**: 通知機能は必須、ダッシュボードは Should

### 改善方針
- 未提出検知と通知（本人・マネージャー）
- 日報未提出催促通知を18:00と翌日9:30に送信（EventBridge + Lambda）
- 提出状況ダッシュボードやレポート
- 勤務表入力未完了通知（月次提出時）

---

## 6. 機能拡張に関する課題（優先度低）

### 課題
- ChatGPT で作成した内容をコピー＆ペーストしている（アプリ内で直接できると良いが、API 利用は避けたい）
- TODO リストから日報内容を出力できない

### 影響度
- **低**: 現状でも運用可能。利便性向上の範囲

### 優先度
- **Could**: 将来的な拡張として検討

### 改善方針
- ChatGPT 連携（優先度低、API 利用なし、無料範囲でデプロイ）
- TODO リスト連携（優先度低）

---

## 優先順位マトリクス

| 優先度 | 課題カテゴリ | 実装フェーズ | 備考 |
|--------|------------|------------|------|
| Must | 認証・アカウント管理 | Phase 2（基盤構築） | チーム導入の前提 |
| Must | 勤務地・設定管理 | Phase 3（MVP） | 基本機能として実装 |
| Must | 休日管理 | Phase 4（拡張機能） | マネージャー要望対応 |
| Must | 勤務表自動化 | Phase 3（MVP）〜 Phase 4 | 段階的に実装 |
| Must | 通知・可視化 | Phase 3（MVP）〜 Phase 4 | 基本通知は MVP、ダッシュボードは拡張 |
| Could | 機能拡張 | 将来検討 | ChatGPT、TODO 連携 |

---

## 改善による期待効果

### 時間削減
- 勤務表の手動調整時間: 月次で約30分 → 自動化により削減
- 休日登録の手動作業: 1回あたり約5分 → 自動反映により削減
- 顧客名・プロジェクト名の設定変更: 1回あたり約2分 → 設定ページで即時変更

### ミス削減
- 休日の反映漏れ: 手動調整によるミスを自動化で解消
- 勤務地の誤入力: 選択式UIで防止

### 可視性向上
- マネージャーの提出状況把握: ダッシュボードで一目瞭然
- 休暇状況の共有: Outlook カレンダー連携で自動可視化

---

## リスク・制約事項

### 技術的リスク
- Outlook Graph API 連携の複雑さ → 早期にプロトタイプ作成で検証
- EventBridge + Lambda の実装経験 → 別プロジェクトで段階的に実装

### 運用リスク
- 自動出力の誤動作 → テストとロールバック手順の整備
- 通知の過多 → 通知設定機能でユーザーが制御可能に

### 制約事項
- ChatGPT API は利用しない（無料範囲でデプロイ）
- Lambda は別プロジェクトで管理

---

※ 本ドキュメントは Phase 0（要件定義）で作成し、Phase 1（詳細設計）以降で詳細化します。

